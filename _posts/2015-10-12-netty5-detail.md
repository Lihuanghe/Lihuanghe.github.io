---
layout: post
title: 'Netty5的启动说明，帮助理解netty5对NIO的封装'
description: "netty5, NIO,SocketChannel"
category: netty
tags: [netty,NIO,SocketChannel]
---
{% include JB/setup %}

Netty5: ServerSocketChannel启动说明： 以NettyExample 里EchoServer为例

```java
	//EventLoop相当于线程，会在run()方法里不断的执行Selector.select(timeout)方法
	//如果有就绪的事件，就创建一个处理对应事件的任务丢进线程池里执行。

	//下边EventLoopGroup就是线程池。
        EventLoopGroup bossGroup = new NioEventLoopGroup(1);
        EventLoopGroup workerGroup = new NioEventLoopGroup();  //这里默认创建 cpu个数 * 2 个线程
        try {
            ServerBootstrap b = new ServerBootstrap();
            b.group(bossGroup, workerGroup)
             .channel(NioServerSocketChannel.class)
             .option(ChannelOption.SO_BACKLOG, 100)
             .handler(new LoggingHandler(LogLevel.INFO))
             .childHandler(new ChannelInitializer<SocketChannel>() {
                 @Override
                 public void initChannel(SocketChannel ch) throws Exception {
                     ChannelPipeline p = ch.pipeline();
                     if (sslCtx != null) {
                         p.addLast(sslCtx.newHandler(ch.alloc()));
                     }
                     //p.addLast(new LoggingHandler(LogLevel.INFO));
                     p.addLast(new EchoServerHandler());
                 }
             });

            // 以上都是设置参数和ChannelHandler ，下面调用bind()才是启动服务器.
	    // 相当于原生NIO调用
	    // ServerSocketChannel servch = ServerSocketChannel.open();
	    // servch.configureBlocking(false);
	    // selectKey = servch.register(selector , 0, null);  
	    // serverSocketChannel.bind();
 	    // selectKey.interestOps(SelectionKey.OP_ACCEPT);
	    // 因为Event是注册到bossGroup里的seletor上的，所以后边bossGroup就能不断的处理Accept事件了。

	    //Start the server.
            ChannelFuture f = b.bind(PORT).sync();

            // Wait until the server socket is closed.
            f.channel().closeFuture().sync();
```

那么Netty又是怎么处理Accept事件呢，看代码：ServerBootstrap 里有个ChannelHandler `ServerBootstrapAcceptor` 专门处理Accept事件.
来看看ServerBootstrapAcceptor的ChannelRead()方法是怎么处理的

```java
        public void channelRead(ChannelHandlerContext ctx, Object msg) {
	    
	   // 由于NioServerSocketChannel是AbstractNioMessageChannel的子类，
	   // 当有Accept事件就绪时就会调用AbstractNioMessageChannel.NioMessageUnsafe.read()方法，
	   // unSafe.read()里再调用NioServerSocketChannel.doReadMessages()方法，实现对serverSocketChannel.accept()的调用，完成三次握手，
	   // 并触发PipeLine的channelRead()方法，所以这里的参数msg是serverSocketChannel.accept()的返回结果: SocketChannel的封装类：NioSocketChannel

            final Channel child = (Channel) msg;

            child.pipeline().addLast(childHandler);

            for (Entry<ChannelOption<?>, Object> e: childOptions) {
                try {
                    if (!child.config().setOption((ChannelOption<Object>) e.getKey(), e.getValue())) {
                        logger.warn("Unknown channel option: " + e);
                    }
                } catch (Throwable t) {
                    logger.warn("Failed to set a channel option: " + child, t);
                }
            }

            for (Entry<AttributeKey<?>, Object> e: childAttrs) {
                child.attr((AttributeKey<Object>) e.getKey()).set(e.getValue());
            }

	    // 这里是注册childChannel的READ事件到workGroup线程池的一个线程上，让Selector 处理这个连接的Read事件。
        // 这里要注意一下 了 : netty的线程模型正是在这里体现的. 一个channel只会注册到一个EventLoop(线程)里,以后这个channel就由这个EventLoop负责了. 这样保证了channelHandler不会被多个线程调用. 避免了多线程并发的复杂性.
	    // 这样当有数据到达时，childGroup线程调用selector.select()方法会返回，并调用unSafe.read()方法。
	    // 最终会调用NioSocketChannel.doReadBytes()方法，完成数据读取,再触发PipeLine的channelRead()方法，跟Accep事件的处理一样的。
	    // 只是传给ChannelRead()方法的参数是Bytebuf.   
            try {
                childGroup.register(child).addListener(new ChannelFutureListener() {
                    @Override
                    public void operationComplete(ChannelFuture future) throws Exception {
                        if (!future.isSuccess()) {
                            forceClose(child, future.cause());
                        }
                    }
                });
            } catch (Throwable t) {
                forceClose(child, t);
            }
        }

```

上面介绍了Netty作为服务端处理Accept 和 Read. 下面看看是如何处理Connect的。 同样从EchoClient来看。

```java
	    // 前边都不说了，跟Server差不多，从这句开始是真正开始建立连接。相当于原生NIO代码的：
	    // SocketChannel clich = SocketChannel.open();
	    // clich.configureBlocking(false);
	    // selectKey = clich.register(selector , 0, null);  
	    // boolean connected = clich.connect(remoteAddress);
 	    // selectKey.interestOps(SelectionKey.OP_CONNECT);
	    // 当服务端accept之后，workGroup就会处理Connect事件了。并调用unsafe.finishConnect()方法完成三次握手。
	    // 之后处理READ事件。
            // Start the client.

            ChannelFuture f = b.connect(HOST, PORT).sync();
```

## netty的pipeline

<DIV>
<svg id="drawing" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="408.19696044921875" height="1303.029541015625" viewBox="-20 -20 408.19696044921875 1303.029541015625"><defs id="SvgjsDefs1157"><marker id="SvgjsMarker1198" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1199" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker><marker id="SvgjsMarker1205" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1206" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker><marker id="SvgjsMarker1212" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1213" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker><marker id="SvgjsMarker1219" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1220" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker><marker id="SvgjsMarker1250" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1251" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker><marker id="SvgjsMarker1257" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1258" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker><marker id="SvgjsMarker1264" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1265" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker><marker id="SvgjsMarker1271" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1272" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker><marker id="SvgjsMarker1289" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1290" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker><marker id="SvgjsMarker1305" markerWidth="16.23606797749979" markerHeight="10.550836550532098" refX="-1" refY="3.8990363547948754" viewBox="-1 -1.3763819204711738 16.23606797749979 10.550836550532098" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath1306" d="M12 3.899036407470703L0 7.798072814941406V0Z " stroke="#323232" stroke-width="2" fill="#323232" transform="matrix(1,0,0,1,0,0)"></path></marker></defs><g id="SvgjsG1158"><path id="SvgjsPath1159" d="M-20 -20H388.19696044921875V1283.029541015625H-20V-20Z " fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG1160"><g id="SvgjsG1161" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,368.1969451904297,334.8111114501953)" opacity="1"><path id="SvgjsPath1162" d="M0 0L811.5972900390625 0L811.5972900390625 287.8105773925781L0 287.8105773925781Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#ffff99" opacity="1"></path><g id="SvgjsG1163" transform="matrix(1 0 0 1 10 135.7802913096728)" fill="#ffffff"><text id="SvgjsText1164" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="395.79863684659466" y="14.4375">ChannelPipeline</text></g></g><g id="SvgjsG1165" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,305.4226188659668,529.8916206359863)" opacity="1"><path id="SvgjsPath1166" d="M0 0L100.86994171142578 0L100.86994171142578 181.8730926513672L0 181.8730926513672Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#ccff99" opacity="1"></path><g id="SvgjsG1167" transform="matrix(1 0 0 1 10 66.56154264496234)" fill="#ffffff"><text id="SvgjsText1168" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="14.4375">ChannelHan</text><text id="SvgjsText1169" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="30.6875">dlerContext</text><text id="SvgjsText1170" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="32.5"></text></g></g><g id="SvgjsG1171" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,243.20287132263184,551.8687686920166)" opacity="1"><path id="SvgjsPath1172" d="M0 4Q0 0 4 0L55.81732940673828 0Q59.81732940673828 0 59.81732940673828 4L59.81732940673828 107.67645263671875Q59.81732940673828 111.67645263671875 55.81732940673828 111.67645263671875L4 111.67645263671875Q0 111.67645263671875 0 107.67645263671875Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#99ffff" opacity="1"></path><g id="SvgjsG1173" transform="matrix(1 0 0 1 10 39.588227939889165)" fill="#ffffff"><text id="SvgjsText1174" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="19.90866408814847" y="14.4375">Hand</text><text id="SvgjsText1175" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="19.90866408814847" y="30.6875">ler</text></g></g><g id="SvgjsG1176" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,305.42262268066406,692.0231475830078)" opacity="1"><path id="SvgjsPath1177" d="M0 0L103.65211486816406 0L103.65211486816406 181.8730926513672L0 181.8730926513672Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#ccff99" opacity="1"></path><g id="SvgjsG1178" transform="matrix(1 0 0 1 10 74.68654264496234)" fill="#ffffff"><text id="SvgjsText1179" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="41.82605890309091" y="14.4375">ChannelHan</text><text id="SvgjsText1180" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="41.82605890309091" y="30.6875">dlerContext</text></g></g><g id="SvgjsG1181" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,243.20287132263184,714.6063938140869)" opacity="1"><path id="SvgjsPath1182" d="M0 4Q0 0 4 0L57.467201232910156 0Q61.467201232910156 0 61.467201232910156 4L61.467201232910156 107.67645263671875Q61.467201232910156 111.67645263671875 57.467201232910156 111.67645263671875L4 111.67645263671875Q0 111.67645263671875 0 107.67645263671875Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#99ffff" opacity="1"></path><g id="SvgjsG1183" transform="matrix(1 0 0 1 10 39.588227939889165)" fill="#ffffff"><text id="SvgjsText1184" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="20.733599812622224" y="14.4375">Hand</text><text id="SvgjsText1185" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="20.733599812622224" y="30.6875">ler</text></g></g><g id="SvgjsG1186" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,305.42262268066406,849.5149230957031)" opacity="1"><path id="SvgjsPath1187" d="M0 0L108.40785217285156 0L108.40785217285156 186.4883575439453L0 186.4883575439453Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#ccff99" opacity="1"></path><g id="SvgjsG1188" transform="matrix(1 0 0 1 10 76.99417683507541)" fill="#ffffff"><text id="SvgjsText1189" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="44.20392580017049" y="14.4375">ChannelHand</text><text id="SvgjsText1190" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="44.20392580017049" y="30.6875">lerContext</text></g></g><g id="SvgjsG1191" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,241.62397384643555,873.1344413757324)" opacity="1"><path id="SvgjsPath1192" d="M0 4Q0 0 4 0L60.287418365478516 0Q64.28741455078125 0 64.28741455078125 4L64.28741455078125 110.51039123535156Q64.28741455078125 114.51039123535156 60.287418365478516 114.51039123535156L4 114.51039123535156Q0 114.51039123535156 0 110.51039123535156Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#99ffff" opacity="1"></path><g id="SvgjsG1193" transform="matrix(1 0 0 1 10 41.0051963022393)" fill="#ffffff"><text id="SvgjsText1194" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="22.14370915084487" y="14.4375">Handl</text><text id="SvgjsText1195" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="22.14370915084487" y="30.6875">er</text></g></g><g id="SvgjsG1196"><path id="SvgjsPath1197" d="M260.7520446777344 630.2294311523438L260.7520446777344 661.2503662109375L260.7520446777344 661.2503662109375L260.7520446777344 677.0352172851562 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1198)"></path><g id="SvgjsG1200" transform="matrix(1 0 0 1 260.7520343556297 645.5073363661195)" fill="#ffffff"><path id="SvgjsPath1201" d="M0 0H0V0H0V0Z " fill="#ffffff" transform="translate(0 0)"></path><text id="SvgjsText1202" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="0"></text></g></g><g id="SvgjsG1203"><path id="SvgjsPath1204" d="M173.00624084472656 692.2713012695312L173.00624084472656 661.09912109375L172.9706573486328 661.09912109375L172.9706573486328 645.1630249023438 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1205)"></path><g id="SvgjsG1207" transform="matrix(1 0 0 1 173.0062475929467 660.5743635744365)" fill="#ffffff"><path id="SvgjsPath1208" d="M0 0H0V0H0V0Z " fill="#ffffff" transform="translate(0 0)"></path><text id="SvgjsText1209" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="0"></text></g></g><g id="SvgjsG1210"><path id="SvgjsPath1211" d="M263.9427795410156 795.5361938476562L263.9427795410156 822.7635498046875L262.89019775390625 822.7635498046875L262.89019775390625 834.7548828125 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1212)"></path><g id="SvgjsG1214" transform="matrix(1 0 0 1 263.9427902379091 807.5468337801426)" fill="#ffffff"><path id="SvgjsPath1215" d="M0 0H0V0H0V0Z " fill="#ffffff" transform="translate(0 0)"></path><text id="SvgjsText1216" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="0"></text></g></g><g id="SvgjsG1217"><path id="SvgjsPath1218" d="M159.83082580566406 849.990966796875L159.83082580566406 822.8330688476562L159.83082580566406 822.8330688476562L159.83082580566406 810.9113159179688 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1219)"></path><g id="SvgjsG1221" transform="matrix(1 0 0 1 159.83083182470398 822.3261203035631)" fill="#ffffff"><path id="SvgjsPath1222" d="M0 0H0V0H0V0Z " fill="#ffffff" transform="translate(0 0)"></path><text id="SvgjsText1223" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="0"></text></g></g><g id="SvgjsG1224" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,303.11498641967773,362.9726142883301)" opacity="1"><path id="SvgjsPath1225" d="M0 0L100.86994171142578 0L100.86994171142578 181.8730926513672L0 181.8730926513672Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#ccff99" opacity="1"></path><g id="SvgjsG1226" transform="matrix(1 0 0 1 10 58.436542644962344)" fill="#ffffff"><text id="SvgjsText1227" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="14.4375">ChannelHan</text><text id="SvgjsText1228" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="30.6875">dlerContext</text><text id="SvgjsText1229" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="46.9375">(Header)</text><text id="SvgjsText1230" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="48.75"></text></g></g><g id="SvgjsG1231" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,240.89523887634277,384.9497318267822)" opacity="1"><path id="SvgjsPath1232" d="M0 4Q0 0 4 0L55.81732940673828 0Q59.81732940673828 0 59.81732940673828 4L59.81732940673828 107.67645263671875Q59.81732940673828 111.67645263671875 55.81732940673828 111.67645263671875L4 111.67645263671875Q0 111.67645263671875 0 107.67645263671875Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#99ffff" opacity="1"></path><g id="SvgjsG1233" transform="matrix(1 0 0 1 10 39.588227939889165)" fill="#ffffff"><text id="SvgjsText1234" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="19.90866408814847" y="14.4375">Hand</text><text id="SvgjsText1235" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="19.90866408814847" y="30.6875">ler</text></g></g><g id="SvgjsG1236" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,303.11498641967773,1013.956714630127)" opacity="1"><path id="SvgjsPath1237" d="M0 0L100.86994171142578 0L100.86994171142578 181.8730926513672L0 181.8730926513672Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#ccff99" opacity="1"></path><g id="SvgjsG1238" transform="matrix(1 0 0 1 10 58.436542644962344)" fill="#ffffff"><text id="SvgjsText1239" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="14.4375">ChannelHan</text><text id="SvgjsText1240" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="30.6875">dlerContext</text><text id="SvgjsText1241" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="46.9375">(Tail)</text><text id="SvgjsText1242" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="40.43497007169791" y="48.75"></text></g></g><g id="SvgjsG1243" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,240.89523887634277,1035.933832168579)" opacity="1"><path id="SvgjsPath1244" d="M0 4Q0 0 4 0L55.81732940673828 0Q59.81732940673828 0 59.81732940673828 4L59.81732940673828 107.67645263671875Q59.81732940673828 111.67645263671875 55.81732940673828 111.67645263671875L4 111.67645263671875Q0 111.67645263671875 0 107.67645263671875Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#99ffff" opacity="1"></path><g id="SvgjsG1245" transform="matrix(1 0 0 1 10 39.588227939889165)" fill="#ffffff"><text id="SvgjsText1246" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="19.90866408814847" y="14.4375">Hand</text><text id="SvgjsText1247" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="middle" text-decoration="blink" x="19.90866408814847" y="30.6875">ler</text></g></g><g id="SvgjsG1248"><path id="SvgjsPath1249" d="M175.76564025878906 530.6101684570312L175.76564025878906 496.8090515136719L175.76564025878906 496.8090515136719L175.76564025878906 478.2440185546875 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1250)"></path><g id="SvgjsG1252" transform="matrix(1 0 0 1 175.7656403844028 496.30208420976874)" fill="#ffffff"><path id="SvgjsPath1253" d="M0 0H28.45313262939453V17.765640258789062H0V0Z " fill="#ffffff" transform="translate(-14.226566314697266 0)"></path><text id="SvgjsText1254" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="14.4375">OUT</text></g></g><g id="SvgjsG1255"><path id="SvgjsPath1256" d="M259.6152038574219 463.0079650878906L259.6152038574219 496.8090515136719L259.6152038574219 496.8090515136719L259.6152038574219 515.3740844726562 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1257)"></path><g id="SvgjsG1259" transform="matrix(1 0 0 1 259.6152135193395 481.06601623226896)" fill="#ffffff"><path id="SvgjsPath1260" d="M0 0H14.75001049041748V17.765605926513672H0V0Z " fill="#ffffff" transform="translate(-7.37500524520874 0)"></path><text id="SvgjsText1261" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="14.4375">IN</text></g></g><g id="SvgjsG1262"><path id="SvgjsPath1263" d="M160.8590545654297 1014.6752319335938L160.8590545654297 985.8817138671875L160.8590545654297 985.8817138671875L160.8590545654297 972.3242797851562 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1264)"></path><g id="SvgjsG1266" transform="matrix(1 0 0 1 160.85904960485857 985.3747642925441)" fill="#ffffff"><path id="SvgjsPath1267" d="M0 0H0V0H0V0Z " fill="#ffffff" transform="translate(0 0)"></path><text id="SvgjsText1268" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="0"></text></g></g><g id="SvgjsG1269"><path id="SvgjsPath1270" d="M263.34185791015625 957.0881958007812L263.34185791015625 985.8817138671875L263.34185791015625 985.8817138671875L263.34185791015625 999.439208984375 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1271)"></path><g id="SvgjsG1273" transform="matrix(1 0 0 1 263.34186121422556 970.1386963150443)" fill="#ffffff"><path id="SvgjsPath1274" d="M0 0H0V0H0V0Z " fill="#ffffff" transform="translate(0 0)"></path><text id="SvgjsText1275" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="0"></text></g></g><g id="SvgjsG1276" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,236.149817943573,1169.833152294159)" opacity="1"><path id="SvgjsPath1277" d="M0 4Q0 0 4 0L89.1964340209961 0Q93.1964340209961 0 93.1964340209961 4L93.1964340209961 121.77436065673828Q93.1964340209961 125.77436065673828 89.1964340209961 125.77436065673828L4 125.77436065673828Q0 125.77436065673828 0 121.77436065673828Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#ffffff" opacity="1"></path><g id="SvgjsG1278" transform="matrix(1 0 0 1 10 -2.112820148797468)" fill="#ffffff"><text id="SvgjsText1279" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="14.4375">bind</text><text id="SvgjsText1280" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="30.6875">connect</text><text id="SvgjsText1281" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="46.9375">write</text><text id="SvgjsText1282" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="63.1875">flush</text><text id="SvgjsText1283" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="79.4375">read</text><text id="SvgjsText1284" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="95.6875">disconnec</text><text id="SvgjsText1285" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="111.9375">t</text><text id="SvgjsText1286" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="128.1875">close</text></g></g><g id="SvgjsG1287"><path id="SvgjsPath1288" d="M172.50482177734375 1169.0753173828125L172.50482177734375 1141.53369140625L172.9706573486328 1141.53369140625L172.9706573486328 1129.2281494140625 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1289)"></path><g id="SvgjsG1291" transform="matrix(1 0 0 1 172.5048236513776 1140.7938195205516)" fill="#ffffff"><path id="SvgjsPath1292" d="M0 0H0V0H0V0Z " fill="#ffffff" transform="translate(0 0)"></path><text id="SvgjsText1293" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="0"></text></g></g><g id="SvgjsG1294" transform="matrix(6.123233995736766e-17,1,-1,6.123233995736766e-17,312.7199363708496,123.04958724975586)" opacity="1"><path id="SvgjsPath1295" d="M0 4Q0 0 4 0L190.46063232421875 0Q194.46063232421875 0 194.46063232421875 4L194.46063232421875 111.52607727050781Q194.46063232421875 115.52607727050781 190.46063232421875 115.52607727050781L4 115.52607727050781Q0 115.52607727050781 0 111.52607727050781Z " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="#ffffff" opacity="1"></path><g id="SvgjsG1296" transform="matrix(1 0 0 1 10 9.013039270734176)" fill="#ffffff"><text id="SvgjsText1297" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="14.4375">fireChannelReadComplete</text><text id="SvgjsText1298" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="30.6875">fireExceptionCaught</text><text id="SvgjsText1299" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="46.9375">fireUserEventTriggered</text><text id="SvgjsText1300" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="63.1875">fireChannelWritabilityChan</text><text id="SvgjsText1301" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="79.4375">ged</text><text id="SvgjsText1302" font-family="微软雅黑,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="normal" font-style="normal" text-anchor="start" text-decoration="blink" x="0" y="95.6875">fireChannelInactive</text></g></g><g id="SvgjsG1303"><path id="SvgjsPath1304" d="M254.9569091796875 317.5102233886719L254.9569091796875 340.4615783691406L254.9569091796875 340.4615783691406L254.9569091796875 348.1768798828125 " stroke-dasharray="" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker1305)"></path><g id="SvgjsG1307" transform="matrix(1 0 0 1 254.95690390073185 324.7185411857198)" fill="#ffffff"><path id="SvgjsPath1308" d="M0 0H0V0H0V0Z " fill="#ffffff" transform="translate(0 0)"></path><text id="SvgjsText1309" font-family="Microsoft Yahei,宋体" text-rendering="optimize-speed" fill="#000000" font-size="13" font-weight="0" font-style="" text-anchor="middle" text-decoration="" x="0" y="0"></text></g></g></g></g></svg>
</DIV>