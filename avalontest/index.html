<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie6"><![endif]-->
<!--[if IE 7 ]><html class="ie7"><![endif]-->
<!--[if IE 8 ]><html class="ie8"><![endif]-->
<!--[if IE 9 ]><html class="ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html>
<!--<![endif]-->
<!--STATUS OK -->	

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="renderer" content="webkit" />
<meta http-equiv="X-UA-Compatible" content="IE=8,chrome=1" />
<link rel="shortcut icon" href="app/../favicon.ico" type="image/x-icon" />
<title>李黄河的avalon学习demo</title>
<link rel="stylesheet" href="app/assets/css/reset.css">
<link rel="stylesheet" href="app/assets/css/common.css">
<link rel="stylesheet" href="app/assets/css/layout.css">

<script src="app/requireconfig.js"></script>
<script src="app/assets/lib/require/require.js"></script>
</head>
<body class="ms-controller" ms-controller="content-main">

	<div ms-if="initcomplete && !isLogin">
		<div style="color:red" >{{errDesc}}</div>
		<label>用户名:</label> <input type="text" ms-duplex="userName" />
		<br/>
		<label>密码:</label> <input type="password" ms-duplex="passwd" /><br/>
		<input type="submit" ms-on-click="login" />
	</div>

	<div ms-if=" initcomplete && isLogin">
	<div class="ui-header ms-controller"  ms-controller="header">
	    <a href="javascrpt:;" class="ui-logo fn-left">
		</a>
		<ul class="ui-header-nav">
		<li ms-repeat="menu"><a href="javascript:;" ms-on-click="dosomething(el)">{{el}}</a></li>
		</ul>
	</div>
	<div class="ui-content " >
		<div  class="ui-left-wrap ms-controller" ms-controller="content-nav">
			<ul class="ui-nav">{{content|html}}
			</ul>
		</div>
		<div class="ui-right-layout  ms-controller" ms-controller="menuView">
			<div class="ui-right-wrap fn-clear"   >
				<div > {{contentSrc|html}} </div>
			</div>
		</div>
	</div>
</div>


</body>
<script type="text/javascript">
	var buildurlArgs = function(config, moduleName, url){
		var urlArgs = requireConfig.get(moduleName);
		//avalon.log('moduleName:'+moduleName +'\turl:'+url);
		if(urlArgs===undefined)
			return "";


		return "bust=" + urlArgs;
	}
	require.config({
		paths : {
			text : 'app/assets/lib/text',
			css : 'app/assets/lib/css',
			avalon : 'app/assets/lib/avalon/avalon.shim155',
			jquery : 'app/assets/lib/jquery/jquery-1.11.3',
			//jquery : 'app/assets/lib/jquery/1.9.0/jquery-1.9.0-min',
			base64 : 'app/assets/lib/base64/jquery.base64',
			mmRouter: 'app/assets/lib/mmRouter-0.5/mmRouter',
			mmHistory:'app/assets/lib/mmRouter-0.5/mmHistory',
			easyui : 'app/assets/lib/easyui/jquery.easyui.min',
			loading :'app/assets/lib/jquery/loading/loading-overlay.min',
			wrapper : 'app/assets/common/avalonJQcomponent',
			map :'app/assets/common/map',
			config : 'app/assets/common/config',
			ztree : 'app/assets/lib/ztree/jquery.ztree.core-3.5',
			jstat: 'app/assets/lib/jstat/jstat',
			'jquery.ui.widget' : 'app/assets/lib/uploader/js/vendor/jquery.ui.widget',
			jqtransport : 'app/assets/lib/uploader/js/jquery.iframe-transport',
			jqUploader : 'app/assets/lib/uploader/js/jquery.fileupload',
			echarts : 'app/assets/lib/echarts/echarts-all',
			jsonFormater : 'app/assets/lib/jsonFormater/jsonFormater'
		},
		waitSeconds:0,
		shim:{
			echarts:{
				exports: ['echarts'],
				init: function () {
					return echarts;
				}
			},
			ztree:["jquery",'css!app/assets/lib/ztree/css/zTreeStyle/zTreeStyle.css'],
			easyui:{deps:['jquery','css!app/assets/lib/easyui/easyui.css' , 'css!app/assets/lib/easyui/icon.css']},
			jstat: {
				exports: ['j$', 'jStat'],
				init: function () {
					return {
					  j$: j$,
					  jStat: jStat
					};
				}
			},
			jqUploader :["jquery","jquery.ui.widget","jqtransport"],
			jsonFormater :{
				deps:["jquery","css!app/assets/lib/jsonFormater/jsonFormater.css"],
				exports: ['jsonFormater'],
				init: function () {
					return JsonFormater;
				}
			}
		},
		baseUrl : "" ,
		urlArgs: buildurlArgs
	});
	require([ "avalon", "app/js/main.js"], function(avalon,jquery,main) {
		avalon.scan();
		avalon.log('done!');
	});
</script>
</html>